(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[817],{7818:(e,t,a)=>{Promise.resolve().then(a.bind(a,9655))},8813:()=>{},9655:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>l});var s=a(5155),r=a(2115);a(8813);var i=a(6995);class n{getNewStatBlock(){return{totalEntries:0,uniqueUrls:new Set,statusCodes:{},totalBytes:0,botRequests:0,humanRequests:0,uniqueBots:new Set,botsByType:{},botStats:{},urlCounts:{},ipCounts:{},minDate:null,maxDate:null,botUrlHits:{},humanReferrers:{}}}initializeBotPatterns(){return{seo:[{name:"Googlebot",pattern:/googlebot|^google$/i,company:"Google"},{name:"Bingbot",pattern:/bingbot/i,company:"Microsoft"},{name:"Slurp",pattern:/slurp/i,company:"Yahoo"},{name:"DuckDuckBot",pattern:/duckduckbot/i,company:"DuckDuckGo"},{name:"Baiduspider",pattern:/baiduspider/i,company:"Baidu"},{name:"YandexBot",pattern:/yandexbot/i,company:"Yandex"},{name:"Sogou",pattern:/sogou/i,company:"Sogou"},{name:"Exabot",pattern:/exabot/i,company:"Exalead"},{name:"facebookexternalhit",pattern:/facebookexternalhit/i,company:"Facebook"},{name:"Twitterbot",pattern:/twitterbot/i,company:"Twitter"},{name:"LinkedInBot",pattern:/linkedinbot/i,company:"LinkedIn"},{name:"WhatsApp",pattern:/whatsapp/i,company:"WhatsApp"},{name:"Applebot",pattern:/applebot/i,company:"Apple"},{name:"MJ12bot",pattern:/mj12bot/i,company:"Majestic"},{name:"AhrefsBot",pattern:/ahrefsbot/i,company:"Ahrefs"},{name:"SemrushBot",pattern:/semrushbot/i,company:"Semrush"},{name:"MozBot",pattern:/rogerbot|dotbot/i,company:"Moz"}],ai:[{name:"GPTBot",pattern:/gptbot/i,company:"OpenAI"},{name:"ChatGPT-User",pattern:/chatgpt-user/i,company:"OpenAI"},{name:"CCBot",pattern:/ccbot/i,company:"Common Crawl"},{name:"Claude-Web",pattern:/claude-web/i,company:"Anthropic"},{name:"PerplexityBot",pattern:/perplexitybot/i,company:"Perplexity"},{name:"YouBot",pattern:/youbot/i,company:"You.com"},{name:"AI2Bot",pattern:/ai2bot/i,company:"AI2"},{name:"ImagesiftBot",pattern:/imagesiftbot/i,company:"ImageSift"},{name:"Omgilibot",pattern:/omgilibot/i,company:"Omgili"},{name:"Bytespider",pattern:/bytespider/i,company:"ByteDance"},{name:"MetaExternalAgent ",pattern:/meta-externalagent/i,company:"Meta"}],social:[{name:"FacebookBot",pattern:/facebookbot/i,company:"Facebook"},{name:"TelegramBot",pattern:/telegrambot/i,company:"Telegram"},{name:"SkypeUriPreview",pattern:/skypeuripreview/i,company:"Skype"},{name:"SlackBot",pattern:/slackbot/i,company:"Slack"},{name:"DiscordBot",pattern:/discordbot/i,company:"Discord"},{name:"RedditBot",pattern:/redditbot/i,company:"Reddit"},{name:"PinterestBot",pattern:/pinterestbot/i,company:"Pinterest"}],monitoring:[{name:"UptimeRobot",pattern:/uptimerobot/i,company:"UptimeRobot"},{name:"Pingdom",pattern:/pingdom/i,company:"Pingdom"},{name:"StatusCake",pattern:/statuscake/i,company:"StatusCake"},{name:"Site24x7",pattern:/site24x7/i,company:"Site24x7"},{name:"GTmetrix",pattern:/gtmetrix/i,company:"GTmetrix"},{name:"PageSpeed",pattern:/pagespeed/i,company:"Google PageSpeed"}],security:[{name:"Nessus",pattern:/nessus/i,company:"Tenable"},{name:"Nikto",pattern:/nikto/i,company:"Nikto"},{name:"Nmap",pattern:/nmap/i,company:"Nmap"},{name:"Qualys",pattern:/qualys/i,company:"Qualys"},{name:"OpenVAS",pattern:/openvas/i,company:"OpenVAS"},{name:"ZAP",pattern:/zap/i,company:"OWASP ZAP"}],other:[{name:"Wget",pattern:/wget/i,company:"GNU Wget"},{name:"Curl",pattern:/curl/i,company:"cURL"},{name:"Python-requests",pattern:/python-requests/i,company:"Python"},{name:"Go-http-client",pattern:/go-http-client/i,company:"Go"},{name:"Java",pattern:/java/i,company:"Java"},{name:"Node.js",pattern:/node/i,company:"Node.js"},{name:"Scrapy",pattern:/scrapy/i,company:"Scrapy"},{name:"Headless Chrome",pattern:/headlesschrome/i,company:"Chrome"},{name:"DownNotifier",pattern:/downnotifier/i,company:"DownNotifier"},{name:"BetterUptime",pattern:/betteruptime|better uptime/i,company:"Better Uptime"},{name:"HubSpotPageFetcher",pattern:/hubspotpagefetcher|HubSpot Page Fetcher/i,company:"HubSpot"},{name:"AdsBot Google Mobile",pattern:/adsbot-google-mobile/i,company:"Google"},{name:"AdsBot Google",pattern:/adsbot-google/i,company:"Google"},{name:"Google-Adwords-Instant",pattern:/google-adwords-instant/i,company:"Google"}]}}initializeEventListeners(){let e=document.getElementById("logFile"),t=document.getElementById("analyzeBtn"),a=document.getElementById("dropbox"),s=document.getElementById("fileListContainer"),r=document.getElementById("clearData"),i=document.getElementById("applyDateRange"),n=document.getElementById("resetDateRange"),l=document.querySelectorAll(".quick-filter-btn"),o=document.getElementById("showComparison"),c=document.getElementById("hideComparison"),d=document.getElementById("runComparison"),m=document.querySelectorAll(".preset-btn"),h=document.getElementById("botUrlFilterDropdown"),u=document.getElementById("botUrlFilterDisplay"),p=document.getElementById("botUrlFilterOptions"),y=document.getElementById("referrerFilterDropdown"),x=document.getElementById("referrerFilterDisplay"),b=document.getElementById("referrerFilterOptions"),g=document.getElementById("compBotFilterDropdown"),f=document.getElementById("compBotFilterDisplay"),v=document.getElementById("compBotFilterOptions"),j=document.getElementById("compReferrerFilterDropdown"),C=document.getElementById("compReferrerFilterDisplay"),B=document.getElementById("compReferrerFilterOptions"),N=document.getElementById("botFilterSearch"),E=document.getElementById("referrerFilterSearch"),S=document.getElementById("compBotFilterSearch"),D=document.getElementById("compReferrerFilterSearch"),T=document.getElementById("botUrlFilterCheckboxes"),L=document.getElementById("referrerFilterCheckboxes"),A=document.getElementById("compBotFilterCheckboxes"),R=document.getElementById("compReferrerFilterCheckboxes"),I=document.getElementById("rejectionModal"),F=document.getElementById("closeRejectionModal"),w=document.getElementById("addRejectionRule"),k=document.getElementById("rejectionRulesContainer"),H=document.getElementById("confirmRejectionAndAnalyze"),M=document.getElementById("analyzeWithoutRejection");e.addEventListener("change",e=>this.addFiles(e.target.files)),a.addEventListener("click",()=>e.click()),a.addEventListener("dragover",e=>{e.preventDefault(),a.classList.add("dragover")}),a.addEventListener("dragleave",e=>{e.preventDefault(),a.classList.remove("dragover")}),a.addEventListener("drop",e=>{e.preventDefault(),a.classList.remove("dragover"),e.dataTransfer.files.length>0&&this.addFiles(e.dataTransfer.files)}),s.addEventListener("click",e=>{if(e.target.classList.contains("remove-file")){e.stopPropagation();let t=Number.parseInt(e.target.dataset.index,10);this.removeFile(t)}}),t.addEventListener("click",()=>{I.classList.remove("hidden")}),r.addEventListener("click",()=>this.clearAllData()),i.addEventListener("click",()=>this.applyDateFilter()),n.addEventListener("click",()=>this.resetDateFilter()),l.forEach(e=>{e.addEventListener("click",e=>{let t=Number.parseInt(e.target.dataset.days);this.applyQuickFilter(t)})}),o.addEventListener("click",()=>this.showComparison()),c.addEventListener("click",()=>this.hideComparison()),d.addEventListener("click",()=>this.runComparison()),m.forEach(e=>{e.addEventListener("click",e=>{let t=e.target.dataset.period,a=Number.parseInt(e.target.dataset.days);this.applyPreset(t,a)})}),u.addEventListener("click",()=>p.classList.toggle("visible")),p.addEventListener("click",e=>{e.target.matches('[data-action="select-all"]')&&p.querySelectorAll('input[type="checkbox"]').forEach(e=>e.checked=!0),e.target.matches('[data-action="deselect-all"]')&&p.querySelectorAll('input[type="checkbox"]').forEach(e=>e.checked=!1),this.updateMultiSelectDisplayText("bot"),this.createBotUrlHitsTable(this.currentAnalysis.botUrlHits)}),x.addEventListener("click",()=>b.classList.toggle("visible")),b.addEventListener("click",e=>{e.target.matches('[data-action="select-all"]')&&b.querySelectorAll('input[type="checkbox"]').forEach(e=>e.checked=!0),e.target.matches('[data-action="deselect-all"]')&&b.querySelectorAll('input[type="checkbox"]').forEach(e=>e.checked=!1),this.updateMultiSelectDisplayText("referrer"),this.createTrafficSourceTable(this.currentAnalysis.humanReferrers)}),f&&(f.addEventListener("click",()=>v.classList.toggle("visible")),v.addEventListener("click",e=>{e.target.matches('[data-action="select-all"]')&&v.querySelectorAll('input[type="checkbox"]').forEach(e=>e.checked=!0),e.target.matches('[data-action="deselect-all"]')&&v.querySelectorAll('input[type="checkbox"]').forEach(e=>e.checked=!1),this.updateMultiSelectDisplayText("compBot"),this.comparisonData&&this.createComparisonBotHitsTable()})),C&&(C.addEventListener("click",()=>B.classList.toggle("visible")),B.addEventListener("click",e=>{e.target.matches('[data-action="select-all"]')&&B.querySelectorAll('input[type="checkbox"]').forEach(e=>e.checked=!0),e.target.matches('[data-action="deselect-all"]')&&B.querySelectorAll('input[type="checkbox"]').forEach(e=>e.checked=!1),this.updateMultiSelectDisplayText("compReferrer"),this.comparisonData&&this.createComparisonTrafficSourcesTable()})),F.addEventListener("click",()=>I.classList.add("hidden")),M.addEventListener("click",()=>{this.rejectionPatterns=[],I.classList.add("hidden"),this.analyzeLogFile()}),H.addEventListener("click",()=>{let e=k.querySelectorAll("input");this.rejectionPatterns=Array.from(e).map(e=>e.value.trim()).filter(e=>""!==e),I.classList.add("hidden"),this.analyzeLogFile()}),w.addEventListener("click",()=>{this.addRejectionRuleRow()}),k.addEventListener("click",e=>{e.target.classList.contains("remove-rule-btn")&&e.target.closest(".rejection-rule-row").remove()}),this.setupFilterSearch(N,T),this.setupFilterSearch(E,L),S&&this.setupFilterSearch(S,A),D&&this.setupFilterSearch(D,R),window.addEventListener("click",e=>{h.contains(e.target)||p.classList.remove("visible"),y.contains(e.target)||b.classList.remove("visible"),g&&!g.contains(e.target)&&v.classList.remove("visible"),j&&!j.contains(e.target)&&B.classList.remove("visible")})}showComparison(){if(!this.fullFileAnalysis)return void alert("Please analyze log files first before comparing periods.");document.getElementById("comparisonSection").classList.remove("hidden"),this.setupComparisonDateInputs()}hideComparison(){document.getElementById("comparisonSection").classList.add("hidden"),document.getElementById("comparisonResults").classList.add("hidden"),this.destroyComparisonCharts(),this.comparisonData=null}setupComparisonDateInputs(){let e=this.fullFileAnalysis.minDate.toISOString().split("T")[0],t=this.fullFileAnalysis.maxDate.toISOString().split("T")[0],a=document.getElementById("periodAStart"),s=document.getElementById("periodAEnd"),r=document.getElementById("periodBStart"),i=document.getElementById("periodBEnd");[a,s,r,i].forEach(a=>{a.min=e,a.max=t});let n=new Date(this.fullFileAnalysis.maxDate),l=new Date(n),o=new Date(n);o.setUTCDate(o.getUTCDate()-6);let c=new Date(o);c.setUTCDate(c.getUTCDate()-1);let d=new Date(c);d.setUTCDate(d.getUTCDate()-6),a.value=o.toISOString().split("T")[0],s.value=l.toISOString().split("T")[0],r.value=d.toISOString().split("T")[0],i.value=c.toISOString().split("T")[0]}applyPreset(e,t){let a=new Date(this.fullFileAnalysis.maxDate);if("A"===e){let e=new Date(a),s=new Date(a);s.setUTCDate(s.getUTCDate()-(t-1)),document.getElementById("periodAStart").value=s.toISOString().split("T")[0],document.getElementById("periodAEnd").value=e.toISOString().split("T")[0]}else{let e=new Date(new Date(document.getElementById("periodAStart").value+"T00:00:00.000Z"));e.setUTCDate(e.getUTCDate()-1);let a=new Date(e);a.setUTCDate(a.getUTCDate()-(t-1)),document.getElementById("periodBStart").value=a.toISOString().split("T")[0],document.getElementById("periodBEnd").value=e.toISOString().split("T")[0]}}runComparison(){let e=new Date(document.getElementById("periodAStart").value+"T00:00:00.000Z"),t=new Date(document.getElementById("periodAEnd").value+"T00:00:00.000Z"),a=new Date(document.getElementById("periodBStart").value+"T00:00:00.000Z"),s=new Date(document.getElementById("periodBEnd").value+"T00:00:00.000Z");if(t<e||s<a)return void alert("End dates cannot be earlier than start dates.");let r=this.aggregateStatsForRange(e,t),i=this.aggregateStatsForRange(a,s);this.comparisonData={periodA:r,periodB:i},this.displayComparisonResults(r,i)}displayComparisonResults(e,t){document.getElementById("comparisonResults").classList.remove("hidden");let a=Math.ceil((e.maxDate-e.minDate)/864e5)+1,s=Math.ceil((t.maxDate-t.minDate)/864e5)+1;document.getElementById("periodADates").textContent="".concat(e.minDate.toLocaleDateString()," - ").concat(e.maxDate.toLocaleDateString()),document.getElementById("periodADuration").textContent="".concat(a," days"),document.getElementById("periodBDates").textContent="".concat(t.minDate.toLocaleDateString()," - ").concat(t.maxDate.toLocaleDateString()),document.getElementById("periodBDuration").textContent="".concat(s," days"),this.updateComparisonMetric("compTotalRequests",e.totalEntries,t.totalEntries),this.updateComparisonMetric("compUniqueUrls",e.uniqueUrls.size,t.uniqueUrls.size),this.updateComparisonMetric("compBotTraffic",e.botRequests,t.botRequests),this.updateComparisonMetric("compHumanTraffic",e.humanRequests,t.humanRequests),this.updateComparisonMetric("compTotalBytes",e.totalBytes,t.totalBytes,!0);let r=e.totalEntries>0?((e.statusCodes[4]||0)+(e.statusCodes[5]||0))/e.totalEntries*100:0,i=t.totalEntries>0?((t.statusCodes[4]||0)+(t.statusCodes[5]||0))/t.totalEntries*100:0;document.getElementById("compErrorRateA").textContent="".concat(r.toFixed(1),"%"),document.getElementById("compErrorRateB").textContent="".concat(i.toFixed(1),"%");let n=0!==i?(r-i)/i*100:0;this.updateChangeIndicator("compErrorRateChange",n,!0),this.createComparisonCharts(e,t),this.setupComparisonTableFilters(e,t),this.createComparisonBotHitsTable(),this.createComparisonTrafficSourcesTable()}setupComparisonTableFilters(e,t){let a=new Set;Object.keys(e.botStats).forEach(e=>a.add(e)),Object.keys(t.botStats).forEach(e=>a.add(e));let s=new Set;for(let t in e.humanReferrers)Object.keys(e.humanReferrers[t]).forEach(e=>s.add(e));for(let e in t.humanReferrers)Object.keys(t.humanReferrers[e]).forEach(e=>s.add(e));this.populateComparisonBotFilter(Array.from(a)),this.populateComparisonReferrerFilter(Array.from(s))}populateComparisonBotFilter(e){let t=document.getElementById("compBotFilterCheckboxes");if(!t)return;if(t.innerHTML="",0===e.length)return void this.updateMultiSelectDisplayText("compBot");let a=e.sort((e,t)=>{var a,s,r,i;let n=((null==(a=this.comparisonData.periodA.botStats[e])?void 0:a.count)||0)+((null==(s=this.comparisonData.periodB.botStats[e])?void 0:s.count)||0);return((null==(r=this.comparisonData.periodA.botStats[t])?void 0:r.count)||0)+((null==(i=this.comparisonData.periodB.botStats[t])?void 0:i.count)||0)-n}),s=a.slice(0,10);a.forEach(e=>{let a=document.createElement("label"),r=document.createElement("input");r.type="checkbox",r.value=e,r.checked=s.includes(e);let i=document.createTextNode(" ".concat(e));a.appendChild(r),a.appendChild(i),t.appendChild(a)}),this.updateMultiSelectDisplayText("compBot")}populateComparisonReferrerFilter(e){let t=document.getElementById("compReferrerFilterCheckboxes");if(!t)return;if(t.innerHTML="",0===e.length)return void this.updateMultiSelectDisplayText("compReferrer");let a=e.sort((e,t)=>"Direct"===e?-1:"Direct"===t?1:e.localeCompare(t)),s=a.slice(0,6);a.forEach(e=>{let a=document.createElement("label"),r=document.createElement("input");r.type="checkbox",r.value=e,r.checked=s.includes(e);let i=document.createTextNode(" ".concat(e));a.appendChild(r),a.appendChild(i),t.appendChild(a)}),this.updateMultiSelectDisplayText("compReferrer")}createComparisonBotHitsTable(){let e=document.querySelector("#comparisonBotHitsTable thead"),t=document.querySelector("#comparisonBotHitsTable tbody");if(!e||!t||!this.comparisonData)return;e.innerHTML="",t.innerHTML="";let a=Array.from(document.querySelectorAll("#compBotFilterCheckboxes input:checked")).map(e=>e.value);if(0===a.length){t.innerHTML='<tr class="table-placeholder"><td colspan="1">Select one or more bots to display comparison data.</td></tr>';return}let s=e.insertRow();s.innerHTML="<th>URL</th>",a.forEach(e=>{s.innerHTML+='<th colspan="3">'.concat(e,"</th>")});let r=e.insertRow();r.innerHTML="<th></th>",a.forEach(()=>{r.innerHTML+="<th>Period A</th><th>Period B</th><th>Change</th>"});let i=new Set;for(let e in this.comparisonData.periodA.botUrlHits)i.add(e);for(let e in this.comparisonData.periodB.botUrlHits)i.add(e);let n=[];for(let e of i){let t=0,s=0,r={};for(let i of a){var l,o;let a=(null==(l=this.comparisonData.periodA.botUrlHits[e])?void 0:l[i])||0,n=(null==(o=this.comparisonData.periodB.botUrlHits[e])?void 0:o[i])||0;t+=a,s+=n,r[i]={hitsA:a,hitsB:n}}(t>0||s>0)&&n.push({url:e,totalHitsA:t,totalHitsB:s,botData:r})}n.sort((e,t)=>t.totalHitsA+t.totalHitsB-(e.totalHitsA+e.totalHitsB));let c=n.slice(0,50);if(0===c.length){t.innerHTML='<tr class="table-placeholder"><td colspan="'.concat(3*a.length+1,'">No bot hits found for the selected bots in either period.</td></tr>');return}c.forEach(e=>{let s=t.insertRow(),r='<td title="'.concat(e.url,'">').concat(e.url.length>50?"".concat(e.url.substring(0,50),"..."):e.url,"</td>");a.forEach(t=>{let{hitsA:a,hitsB:s}=e.botData[t],i=0!==s?(a-s)/s*100:100*(a>0),n=.1>Math.abs(i)?"table-change-neutral":i>0?"table-change-positive":"table-change-negative";r+="<td>".concat(a.toLocaleString(),"</td>"),r+="<td>".concat(s.toLocaleString(),"</td>"),r+='<td class="'.concat(n,'">').concat(i>=0?"+":"").concat(i.toFixed(1),"%</td>")}),s.innerHTML=r})}createComparisonTrafficSourcesTable(){let e=document.querySelector("#comparisonTrafficSourcesTable thead"),t=document.querySelector("#comparisonTrafficSourcesTable tbody");if(!e||!t||!this.comparisonData)return;e.innerHTML="",t.innerHTML="";let a=Array.from(document.querySelectorAll("#compReferrerFilterCheckboxes input:checked")).map(e=>e.value);if(0===a.length){t.innerHTML='<tr class="table-placeholder"><td colspan="1">Select one or more referrers to display comparison data.</td></tr>';return}let s=e.insertRow();s.innerHTML="<th>URL</th>",a.forEach(e=>{s.innerHTML+='<th colspan="3">'.concat(e,"</th>")});let r=e.insertRow();r.innerHTML="<th></th>",a.forEach(()=>{r.innerHTML+="<th>Period A</th><th>Period B</th><th>Change</th>"});let i=new Set;for(let e in this.comparisonData.periodA.humanReferrers)i.add(e);for(let e in this.comparisonData.periodB.humanReferrers)i.add(e);let n=[];for(let e of i){let t=0,s=0,r={};for(let i of a){var l,o;let a=(null==(l=this.comparisonData.periodA.humanReferrers[e])?void 0:l[i])||0,n=(null==(o=this.comparisonData.periodB.humanReferrers[e])?void 0:o[i])||0;t+=a,s+=n,r[i]={hitsA:a,hitsB:n}}(t>0||s>0)&&n.push({url:e,totalHitsA:t,totalHitsB:s,referrerData:r})}n.sort((e,t)=>t.totalHitsA+t.totalHitsB-(e.totalHitsA+e.totalHitsB));let c=n.slice(0,50);if(0===c.length){t.innerHTML='<tr class="table-placeholder"><td colspan="'.concat(3*a.length+1,'">No traffic found from the selected referrers in either period.</td></tr>');return}c.forEach(e=>{let s=t.insertRow(),r='<td title="'.concat(e.url,'">').concat(e.url.length>50?"".concat(e.url.substring(0,50),"..."):e.url,"</td>");a.forEach(t=>{let{hitsA:a,hitsB:s}=e.referrerData[t],i=0!==s?(a-s)/s*100:100*(a>0),n=.1>Math.abs(i)?"table-change-neutral":i>0?"table-change-positive":"table-change-negative";r+="<td>".concat(a.toLocaleString(),"</td>"),r+="<td>".concat(s.toLocaleString(),"</td>"),r+='<td class="'.concat(n,'">').concat(i>=0?"+":"").concat(i.toFixed(1),"%</td>")}),s.innerHTML=r})}updateComparisonMetric(e,t,a){let s=arguments.length>3&&void 0!==arguments[3]&&arguments[3],r=document.getElementById(e+"A"),i=document.getElementById(e+"B"),n=document.getElementById(e+"Change");s?(r.textContent=this.formatBytes(t),i.textContent=this.formatBytes(a)):(r.textContent=t.toLocaleString(),i.textContent=a.toLocaleString());let l=0!==a?(t-a)/a*100:0;this.updateChangeIndicator(n.id,l)}updateChangeIndicator(e,t){let a=arguments.length>2&&void 0!==arguments[2]&&arguments[2],s=document.getElementById(e),r=Math.abs(t);s.textContent="".concat(t>=0?"+":"").concat(t.toFixed(1),"%"),s.classList.remove("positive","negative","neutral"),r<.1?s.classList.add("neutral"):t>0?s.classList.add(a?"negative":"positive"):s.classList.add(a?"positive":"negative")}createComparisonCharts(e,t){this.destroyComparisonCharts(),this.createComparisonTrafficChart(e,t),this.createComparisonBotChart(e,t)}createComparisonTrafficChart(e,t){let a=document.getElementById("comparisonTrafficChart").getContext("2d"),s=this.getDatesInRange(e.minDate,e.maxDate),r=this.getDatesInRange(t.minDate,t.maxDate),n=s.map(e=>{var t;let a=e.toISOString().split("T")[0];return(null==(t=this.dailyStats[a])?void 0:t.totalEntries)||0}),l=r.map(e=>{var t;let a=e.toISOString().split("T")[0];return(null==(t=this.dailyStats[a])?void 0:t.totalEntries)||0}),o=Array.from({length:Math.max(s.length,r.length)},(e,t)=>"Day ".concat(t+1));this.comparisonCharts.traffic=new i.Ay(a,{type:"line",data:{labels:o,datasets:[{label:"Period A",data:n,borderColor:"#3498db",backgroundColor:"rgba(52, 152, 219, 0.1)",tension:.1,fill:!1},{label:"Period B",data:l,borderColor:"#e74c3c",backgroundColor:"rgba(231, 76, 60, 0.1)",tension:.1,fill:!1}]},options:{responsive:!0,maintainAspectRatio:!1,scales:{y:{beginAtZero:!0}},plugins:{legend:{position:"top"}}}})}createComparisonBotChart(e,t){let a=document.getElementById("comparisonBotChart").getContext("2d");this.comparisonCharts.bot=new i.Ay(a,{type:"bar",data:{labels:["Bot Traffic","Human Traffic"],datasets:[{label:"Period A",data:[e.botRequests,e.humanRequests],backgroundColor:["rgba(52, 152, 219, 0.8)","rgba(52, 152, 219, 0.6)"]},{label:"Period B",data:[t.botRequests,t.humanRequests],backgroundColor:["rgba(231, 76, 60, 0.8)","rgba(231, 76, 60, 0.6)"]}]},options:{responsive:!0,maintainAspectRatio:!1,scales:{y:{beginAtZero:!0}},plugins:{legend:{position:"top"}}}})}getDatesInRange(e,t){let a=[],s=new Date(e);for(;s<=t;)a.push(new Date(s)),s.setUTCDate(s.getUTCDate()+1);return a}destroyComparisonCharts(){Object.values(this.comparisonCharts).forEach(e=>e.destroy()),this.comparisonCharts={}}addFiles(e){for(let t of Array.from(e).filter(e=>"text/plain"===e.type||e.name.endsWith(".log")||e.name.endsWith(".txt")))this.selectedFiles.some(e=>e.name===t.name&&e.size===t.size)||this.selectedFiles.push(t);this.updateFileDisplay()}updateFileDisplay(){let e=document.getElementById("fileListContainer"),t=document.querySelector(".dropbox-content");e.innerHTML="",this.selectedFiles.length>0?(t.classList.add("hidden"),e.classList.remove("hidden"),this.selectedFiles.forEach((t,a)=>{let s=document.createElement("div");s.className="file-list-item",s.innerHTML='\n                <div class="file-icon">\uD83D\uDCC4</div>\n                <div class="file-details">\n                    <div class="file-name" title="'.concat(t.name,'">').concat(t.name,'</div>\n                    <div class="file-size">').concat(this.formatFileSize(t.size),'</div>\n                </div>\n                <button class="remove-file" data-index="').concat(a,'" title="Remove file">✕</button>\n            '),e.appendChild(s)})):(t.classList.remove("hidden"),e.classList.add("hidden")),document.getElementById("analyzeBtn").disabled=0===this.selectedFiles.length}removeFile(e){e>-1&&e<this.selectedFiles.length&&(this.selectedFiles.splice(e,1),this.updateFileDisplay())}clearFileSelection(){this.selectedFiles=[],document.getElementById("logFile").value="",this.updateFileDisplay()}clearAllData(){this.dailyStats={},this.currentAnalysis=null,this.fullFileAnalysis=null,this.comparisonData=null,this.destroyExistingCharts(),this.destroyComparisonCharts(),document.getElementById("results").classList.add("hidden"),document.getElementById("filteredInfo").classList.add("hidden"),document.getElementById("comparisonSection").classList.add("hidden"),this.clearFileSelection(),document.getElementById("progressBar").style.width="0%",document.getElementById("botUrlFilterCheckboxes").innerHTML="",document.querySelector("#botUrlHitsTable tbody").innerHTML="",document.querySelector("#botUrlHitsTable thead").innerHTML="",this.updateMultiSelectDisplayText("bot"),document.getElementById("referrerFilterCheckboxes").innerHTML="",document.querySelector("#trafficSourceTable tbody").innerHTML="",document.querySelector("#trafficSourceTable thead").innerHTML="",this.updateMultiSelectDisplayText("referrer");let e=document.getElementById("compBotFilterCheckboxes"),t=document.getElementById("compReferrerFilterCheckboxes");e&&(e.innerHTML="",this.updateMultiSelectDisplayText("compBot")),t&&(t.innerHTML="",this.updateMultiSelectDisplayText("compReferrer"));let a=document.querySelector("#comparisonBotHitsTable tbody"),s=document.querySelector("#comparisonTrafficSourcesTable tbody");a&&(a.innerHTML=""),s&&(s.innerHTML="")}formatFileSize(e){if(0===e)return"0 B";let t=Math.floor(Math.log(e)/Math.log(1024));return"".concat(Number.parseFloat((e/Math.pow(1024,t)).toFixed(1))," ").concat(["B","KB","MB","GB"][t])}async analyzeLogFile(){if(0===this.selectedFiles.length)return void alert("Please select one or more log files to analyze.");this.showLoading(!0),this.dailyStats={};try{let e=this.selectedFiles.reduce((e,t)=>e+t.size,0),t=0,a=a=>{t+=a;let s=e>0?Math.min(t/e*80,80):0;this.updateProgress(s)},s=1;for(let e of this.selectedFiles){let t=document.getElementById("loadingStatus");t&&(t.textContent="Processing file ".concat(s," of ").concat(this.selectedFiles.length,": ").concat(e.name)),await this.processFileLineByLine(e,a),s++}let r=Object.keys(this.dailyStats).sort();if(0===r.length){alert("No valid log entries found in the selected file(s). Check file format and exclusion rules."),this.showLoading(!1);return}let i=new Date(r[0]),n=new Date(r[r.length-1]);this.fullFileAnalysis=this.aggregateStatsForRange(i,n),this.currentAnalysis=this.fullFileAnalysis;let l=document.getElementById("loadingStatus");l&&(l.textContent="Generating analysis..."),await new Promise(e=>setTimeout(e,50)),this.setupDateRangeControls(i,n),this.displayResults(this.currentAnalysis),this.updateProgress(100)}catch(e){console.error("Error analyzing log files:",e),alert("Error analyzing log files: ".concat(e.message,"."))}finally{this.showLoading(!1)}}async processFileLineByLine(e,t){let a=0,s="",r=/^(\S+) \S+ \S+ \[([^\]]+)\] "(\S+) ([^"]*) HTTP\/[\d.]+" (\d+) (\d+|-) "([^"]*)" "([^"]*)"/;for(;a<e.size;){let i=e.slice(a,a+0x4000000),n=await i.text();t(i.size),a+=0x4000000;let l=(s+=n).split("\n");for(let e of(s=l.pop()||"",l))e&&this.processLogLine(e,r);await new Promise(e=>setTimeout(e,1))}s&&this.processLogLine(s,r)}addRejectionRuleRow(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=document.getElementById("rejectionRulesContainer"),a=document.createElement("div");a.className="rejection-rule-row";let s=document.createElement("input");s.type="text",s.placeholder="/path/to/exclude/",s.value=e;let r=document.createElement("button");r.className="remove-rule-btn",r.textContent="−",a.appendChild(s),a.appendChild(r),t.appendChild(a)}processLogLine(e,t){let a=t.exec(e);if(!a)return;let[,,,,s]=a;for(let e of this.rejectionPatterns)if(e&&s.startsWith(e))return;let[,r,i,n,l,o,c,d,m]=a;try{let[e,t,a,s]=i.replace(/(\d{2})\/(\w{3})\/(\d{4}):(\d{2}):(\d{2}):(\d{2}) ([+-]\d{4})/,"$1 $2 $3 $4:$5:$6").split(" "),[h,u,p]=s.split(":"),y=new Date(Date.UTC(Number.parseInt(a),{Jan:0,Feb:1,Mar:2,Apr:3,May:4,Jun:5,Jul:6,Aug:7,Sep:8,Oct:9,Nov:10,Dec:11}[t],Number.parseInt(e),Number.parseInt(h),Number.parseInt(u),Number.parseInt(p)));if(isNaN(y))return;let x={ip:r,timestamp:y,method:n,url:l||"/",status:Number.parseInt(o),size:"-"===c?0:Number.parseInt(c),referer:d,userAgent:m};this.updateDailyStats(x)}catch(e){}}updateDailyStats(e){let t=e.timestamp.toISOString().split("T")[0];this.dailyStats[t]||(this.dailyStats[t]=this.getNewStatBlock());let a=this.dailyStats[t];a.totalEntries++,a.totalBytes+=e.size,a.uniqueUrls.add(e.url),a.urlCounts[e.url]=(a.urlCounts[e.url]||0)+1,a.ipCounts[e.ip]=(a.ipCounts[e.ip]||0)+1;let s=Math.floor(e.status/100);a.statusCodes[s]=(a.statusCodes[s]||0)+1;let r=this.detectBot(e.userAgent);if(r.isBot)a.botRequests++,a.uniqueBots.add(r.name),a.botsByType[r.type]=(a.botsByType[r.type]||0)+1,a.botStats[r.name]||(a.botStats[r.name]={...r,count:0,lastSeen:e.timestamp}),a.botStats[r.name].count++,a.botStats[r.name].lastSeen=e.timestamp,a.botUrlHits[e.url]||(a.botUrlHits[e.url]={}),a.botUrlHits[e.url][r.name]=(a.botUrlHits[e.url][r.name]||0)+1;else{a.humanRequests++;let t="Direct";if(e.referer&&e.referer.startsWith("http"))try{t=new URL(e.referer).hostname}catch(e){}a.humanReferrers[e.url]||(a.humanReferrers[e.url]={}),a.humanReferrers[e.url][t]=(a.humanReferrers[e.url][t]||0)+1}}aggregateStatsForRange(e,t){let a=this.getNewStatBlock();for(let s of(a.minDate=e,a.maxDate=t,Object.keys(this.dailyStats).sort())){let r=new Date(s+"T00:00:00.000Z");if(r>=e&&r<=t){let e=this.dailyStats[s];for(let[t,s]of(a.totalEntries+=e.totalEntries,a.totalBytes+=e.totalBytes,a.botRequests+=e.botRequests,a.humanRequests+=e.humanRequests,Object.entries(e.statusCodes)))a.statusCodes[t]=(a.statusCodes[t]||0)+s;for(let[t,s]of Object.entries(e.urlCounts))a.urlCounts[t]=(a.urlCounts[t]||0)+s;for(let[t,s]of Object.entries(e.ipCounts))a.ipCounts[t]=(a.ipCounts[t]||0)+s;for(let[t,s]of Object.entries(e.botsByType))a.botsByType[t]=(a.botsByType[t]||0)+s;for(let[t,s]of(e.uniqueUrls.forEach(e=>a.uniqueUrls.add(e)),e.uniqueBots.forEach(e=>a.uniqueBots.add(e)),Object.entries(e.botStats)))a.botStats[t]?(a.botStats[t].count+=s.count,s.lastSeen>a.botStats[t].lastSeen&&(a.botStats[t].lastSeen=s.lastSeen)):a.botStats[t]={...s};for(let[t,s]of Object.entries(e.botUrlHits))for(let[e,r]of(a.botUrlHits[t]||(a.botUrlHits[t]={}),Object.entries(s)))a.botUrlHits[t][e]=(a.botUrlHits[t][e]||0)+r;for(let[t,s]of Object.entries(e.humanReferrers))for(let[e,r]of(a.humanReferrers[t]||(a.humanReferrers[t]={}),Object.entries(s)))a.humanReferrers[t][e]=(a.humanReferrers[t][e]||0)+r}}return a}updateProgress(e){let t=document.getElementById("progressBar");t&&(t.style.width="".concat(e,"%"))}detectBot(e){for(let[t,a]of Object.entries(this.botPatterns))for(let s of a)if(s.pattern.test(e))return{isBot:!0,name:s.name,type:t,company:s.company};for(let t of[/bot/i,/crawler/i,/spider/i,/scraper/i,/fetcher/i,/monitor/i,/checker/i,/validator/i,/indexer/i])if(t.test(e)){let t=e.match(/(\w+bot|\w+spider|\w+crawler)/i);return{isBot:!0,name:t?t[1]:"Unknown Bot",type:"other",company:"Unknown"}}return{isBot:!1,name:null,type:null,company:null}}displayResults(e){this.destroyExistingCharts(),this.displayStatistics(e),this.displayBotAnalysis(e),this.createAllCharts(e),this.populateBotFilterControls(e.botStats),this.populateReferrerFilterControls(e.humanReferrers),this.createAllTables(e),document.getElementById("results").classList.remove("hidden")}displayStatistics(e){let t=e.minDate&&e.maxDate?Math.max(1,Math.ceil((e.maxDate-e.minDate)/864e5)):1;document.getElementById("uniqueUrls").textContent=e.uniqueUrls.size.toLocaleString(),document.getElementById("uniqueUrlsPerDay").textContent=Math.round(e.uniqueUrls.size/t).toLocaleString(),document.getElementById("totalEvents").textContent=e.totalEntries.toLocaleString(),document.getElementById("eventsPerDay").textContent=Math.round(e.totalEntries/t).toLocaleString(),document.getElementById("totalBytes").textContent=this.formatBytes(e.totalBytes),document.getElementById("avgBytes").textContent=this.formatBytes(e.totalEntries>0?Math.round(e.totalBytes/e.totalEntries):0),document.getElementById("bytesPerDay").textContent=this.formatBytes(Math.round(e.totalBytes/t)),document.getElementById("successCount").textContent=(e.statusCodes[2]||0).toLocaleString(),document.getElementById("redirectionCount").textContent=(e.statusCodes[3]||0).toLocaleString(),document.getElementById("clientErrorCount").textContent=(e.statusCodes[4]||0).toLocaleString(),document.getElementById("serverErrorCount").textContent=(e.statusCodes[5]||0).toLocaleString(),document.getElementById("errorCount").textContent=((e.statusCodes[4]||0)+(e.statusCodes[5]||0)).toLocaleString(),document.getElementById("totalBotRequests").textContent=e.botRequests.toLocaleString(),document.getElementById("botTrafficPercentage").textContent=e.totalEntries>0?"".concat((e.botRequests/e.totalEntries*100).toFixed(1),"%"):"0%",document.getElementById("uniqueBots").textContent=e.uniqueBots.size.toLocaleString(),document.getElementById("humanTrafficPercentage").textContent=e.totalEntries>0?"".concat((e.humanRequests/e.totalEntries*100).toFixed(1),"%"):"0%"}displayBotAnalysis(e){["seo","ai","social","monitoring","security","other"].forEach(t=>{document.getElementById("".concat(t,"BotsCount")).textContent="".concat((e.botsByType[t]||0).toLocaleString()," requests"),this.populateBotList(t,e.botStats,e.totalEntries)})}populateBotList(e,t,a){let s=document.getElementById("".concat(e,"BotsList"));s.innerHTML="";let r=Object.values(t).filter(t=>t.type===e).sort((e,t)=>t.count-e.count);if(0===r.length){s.innerHTML='<div class="empty-category">No bots detected in this category</div>';return}r.forEach(e=>{let t=a>0?(e.count/a*100).toFixed(2):0,r=document.createElement("div");r.className="bot-item",r.innerHTML='\n        <div class="bot-info">\n          <div class="bot-name">'.concat(e.name,'</div>\n          <div class="bot-company">').concat(e.company,'</div>\n        </div>\n        <div class="bot-stats">\n          <div class="bot-requests">').concat(e.count.toLocaleString(),' requests</div>\n          <div class="bot-percentage">').concat(t,"%</div>\n        </div>"),s.appendChild(r)})}destroyExistingCharts(){Object.values(this.charts).forEach(e=>e.destroy()),this.charts={}}createAllCharts(e){let t={};for(let a of Object.keys(this.dailyStats).sort()){let s=new Date(a+"T00:00:00.000Z");s>=e.minDate&&s<=e.maxDate&&(t[a]=this.dailyStats[a])}this.createResponseCodesChart(t),this.createEventsChart(t),this.createBotActivityChart(t),this.createUrlsChart(e.urlCounts),this.createBotDistributionChart(e.botStats)}createResponseCodesChart(e){let t=document.getElementById("responseCodesChart").getContext("2d"),a=Object.keys(e).sort(),s=[{label:"Success (2xx)",data:a.map(t=>{var a;return(null==(a=e[t])?void 0:a.statusCodes[2])||0}),borderColor:"#27ae60",tension:.1},{label:"Redirection (3xx)",data:a.map(t=>{var a;return(null==(a=e[t])?void 0:a.statusCodes[3])||0}),borderColor:"#f39c12",tension:.1},{label:"Client Error (4xx)",data:a.map(t=>{var a;return(null==(a=e[t])?void 0:a.statusCodes[4])||0}),borderColor:"#e74c3c",tension:.1},{label:"Server Error (5xx)",data:a.map(t=>{var a;return(null==(a=e[t])?void 0:a.statusCodes[5])||0}),borderColor:"#8e44ad",tension:.1}];this.charts.responseCodes=new i.Ay(t,{type:"line",data:{labels:a,datasets:s},options:{responsive:!0,maintainAspectRatio:!1,scales:{y:{beginAtZero:!0}}}})}createEventsChart(e){let t=document.getElementById("eventsChart").getContext("2d"),a=Object.keys(e).sort();this.charts.events=new i.Ay(t,{type:"line",data:{labels:a,datasets:[{label:"Total Events",data:a.map(t=>{var a;return(null==(a=e[t])?void 0:a.totalEntries)||0}),borderColor:"#3498db",tension:.1,fill:!0}]},options:{responsive:!0,maintainAspectRatio:!1,scales:{y:{beginAtZero:!0}}}})}createBotActivityChart(e){let t=document.getElementById("botActivityChart").getContext("2d"),a=Object.keys(e).sort(),s=[{label:"Human Traffic",data:a.map(t=>{var a;return(null==(a=e[t])?void 0:a.humanRequests)||0}),borderColor:"#27ae60",tension:.1},{label:"Bot Traffic",data:a.map(t=>{var a;return(null==(a=e[t])?void 0:a.botRequests)||0}),borderColor:"#e74c3c",tension:.1}];this.charts.botActivity=new i.Ay(t,{type:"line",data:{labels:a,datasets:s},options:{responsive:!0,maintainAspectRatio:!1,scales:{y:{beginAtZero:!0}}}})}createUrlsChart(e){let t=document.getElementById("urlsChart").getContext("2d"),a=Object.entries(e).sort((e,t)=>{let[,a]=e,[,s]=t;return s-a}).slice(0,10);this.charts.urls=new i.Ay(t,{type:"bar",data:{labels:a.map(e=>{let[t]=e;return t.length>30?"".concat(t.substring(0,30),"..."):t}),datasets:[{label:"Requests",data:a.map(e=>{let[,t]=e;return t}),backgroundColor:"rgba(52, 152, 219, 0.8)"}]},options:{responsive:!0,maintainAspectRatio:!1,scales:{y:{beginAtZero:!0}}}})}createBotDistributionChart(e){let t=document.getElementById("botDistributionChart").getContext("2d"),a=Object.values(e).sort((e,t)=>t.count-e.count).slice(0,10);this.charts.botDistribution=new i.Ay(t,{type:"doughnut",data:{labels:a.map(e=>e.name),datasets:[{data:a.map(e=>e.count),backgroundColor:["#FF6384","#36A2EB","#FFCE56","#4BC0C0","#9966FF","#FF9F40","#c8a2c8","#fd7f6f","#7eb0d5","#b2e061"]}]},options:{responsive:!0,maintainAspectRatio:!1,plugins:{legend:{position:"right"}}}})}createAllTables(e){this.createTopUrlsTable(e.urlCounts,e.totalEntries),this.createTopIpsTable(e.ipCounts,e.totalEntries),this.createBotTable(e.botStats,e.totalEntries),this.createBotUrlHitsTable(e.botUrlHits),this.createTrafficSourceTable(e.humanReferrers)}createTopUrlsTable(e,t){let a=Object.entries(e).sort((e,t)=>{let[,a]=e,[,s]=t;return s-a}).slice(0,20),s=document.querySelector("#topUrlsTable tbody");s.innerHTML="",a.forEach(e=>{let[a,r]=e,i=t>0?(r/t*100).toFixed(2):0;s.insertRow().innerHTML='<td title="'.concat(a,'">').concat(a.length>50?"".concat(a.substring(0,50),"..."):a,"</td><td>").concat(r.toLocaleString(),'</td><td class="percentage">').concat(i,"%</td>")})}createTopIpsTable(e,t){let a=Object.entries(e).sort((e,t)=>{let[,a]=e,[,s]=t;return s-a}).slice(0,20),s=document.querySelector("#topIpsTable tbody");s.innerHTML="",a.forEach(e=>{let[a,r]=e,i=t>0?(r/t*100).toFixed(2):0;s.insertRow().innerHTML="<td>".concat(a,"</td><td>").concat(r.toLocaleString(),'</td><td class="percentage">').concat(i,"%</td>")})}createBotTable(e,t){let a=Object.values(e).sort((e,t)=>t.count-e.count).slice(0,50),s=document.querySelector("#botDetailsTable tbody");s.innerHTML="",a.forEach(e=>{let a=t>0?(e.count/t*100).toFixed(2):0;s.insertRow().innerHTML="<td><strong>".concat(e.name,"</strong><br><small>").concat(e.company,'</small></td><td><span class="bot-type-').concat(e.type,'">').concat(e.type.toUpperCase(),"</span></td><td>").concat(e.count.toLocaleString(),'</td><td class="percentage">').concat(a,"%</td><td>").concat(new Date(e.lastSeen).toLocaleString(),"</td>")})}updateMultiSelectDisplayText(e){let t=document.getElementById("".concat(e,"FilterDisplay")),a=document.getElementById("".concat(e,"FilterCheckboxes"));if(!a||!t)return;let s=a.querySelectorAll("input:checked").length,r=a.querySelectorAll("input").length,i="items";"bot"===e?i="bots":"referrer"===e?i="referrers":"compBot"===e?i="bots":"compReferrer"===e&&(i="referrers"),0===r?t.textContent="No ".concat(i," detected"):0===s?t.textContent="Select ".concat(i.charAt(0).toUpperCase()+i.slice(1)):s===r?t.textContent="All ".concat(i," selected"):t.textContent="".concat(s," of ").concat(r," ").concat(i," selected")}populateBotFilterControls(e){let t=document.getElementById("botUrlFilterCheckboxes");t.innerHTML="";let a=Object.values(e).sort((e,t)=>t.count-e.count);if(0===a.length)return void this.updateMultiSelectDisplayText("bot");let s=a.slice(0,10).map(e=>e.name);a.forEach(e=>{let a=document.createElement("label"),r=document.createElement("input");r.type="checkbox",r.value=e.name,r.checked=s.includes(e.name);let i=document.createTextNode(" ".concat(e.name));a.appendChild(r),a.appendChild(i),t.appendChild(a)}),this.updateMultiSelectDisplayText("bot")}populateReferrerFilterControls(e){let t=document.getElementById("referrerFilterCheckboxes");t.innerHTML="";let a=new Set,s={};for(let t in e)for(let[r,i]of Object.entries(e[t]))a.add(r),s[r]=(s[r]||0)+i;let r=Array.from(a).sort((e,t)=>"Direct"===e?-1:"Direct"===t?1:e.localeCompare(t));if(0===r.length)return void this.updateMultiSelectDisplayText("referrer");let i=Object.entries(s).filter(e=>{let[t]=e;return"Direct"!==t}).sort((e,t)=>{let[,a]=e,[,s]=t;return s-a}).slice(0,5).map(e=>{let[t]=e;return t});r.forEach(e=>{let a=document.createElement("label"),s=document.createElement("input");s.type="checkbox",s.value=e,s.checked="Direct"===e||i.includes(e);let r=document.createTextNode(" ".concat(e));a.appendChild(s),a.appendChild(r),t.appendChild(a)}),this.updateMultiSelectDisplayText("referrer")}createBotUrlHitsTable(e){let t=document.querySelector("#botUrlHitsTable thead"),a=document.querySelector("#botUrlHitsTable tbody");t.innerHTML="",a.innerHTML="";let s=Array.from(document.querySelectorAll("#botUrlFilterCheckboxes input:checked")).map(e=>e.value);if(0===s.length){a.innerHTML='<tr class="table-placeholder"><td colspan="1">Select one or more bots to display data.</td></tr>';return}let r=t.insertRow();r.innerHTML="<th>URL</th>",s.forEach(e=>{r.innerHTML+="<th>".concat(e,"</th>")}),r.innerHTML+="<th>Total</th>";let i=[];for(let[t,a]of Object.entries(e)){let e=0,r=!1,n={};for(let t of s){let s=a[t]||0;s>0&&(r=!0,e+=s,n[t]=s)}r&&i.push({url:t,totalHits:e,botCounts:n})}i.sort((e,t)=>t.totalHits-e.totalHits);let n=i.slice(0,100);if(0===n.length){a.innerHTML='<tr class="table-placeholder"><td colspan="'.concat(s.length+2,'">No hits found for the selected bots in this period.</td></tr>');return}n.forEach(e=>{let t=a.insertRow(),r='<td title="'.concat(e.url,'">').concat(e.url.length>70?"".concat(e.url.substring(0,70),"..."):e.url,"</td>");s.forEach(t=>{r+="<td>".concat((e.botCounts[t]||0).toLocaleString(),"</td>")}),t.innerHTML=r+="<td><strong>".concat(e.totalHits.toLocaleString(),"</strong></td>")});let l=a.insertRow(),o="<td><strong>Total</strong></td>";s.forEach(e=>{let t=n.reduce((t,a)=>t+(a.botCounts[e]||0),0);o+="<td><strong>".concat(t.toLocaleString(),"</strong></td>")});let c=n.reduce((e,t)=>e+t.totalHits,0);l.innerHTML=o+="<td><strong>".concat(c.toLocaleString(),"</strong></td>")}createTrafficSourceTable(e){let t=document.querySelector("#trafficSourceTable thead"),a=document.querySelector("#trafficSourceTable tbody");t.innerHTML="",a.innerHTML="";let s=Array.from(document.querySelectorAll("#referrerFilterCheckboxes input:checked")).map(e=>e.value);if(0===s.length){a.innerHTML='<tr class="table-placeholder"><td colspan="1">Select one or more referrers to display data.</td></tr>';return}let r=t.insertRow();r.innerHTML="<th>Destination URL</th>",s.forEach(e=>{r.innerHTML+="<th>".concat(e,"</th>")}),r.innerHTML+="<th>Total</th>";let i=[];for(let[t,a]of Object.entries(e)){let e=0,r=!1,n={};for(let t of s){let s=a[t]||0;s>0&&(r=!0,e+=s,n[t]=s)}r&&i.push({url:t,totalHits:e,referrerCounts:n})}i.sort((e,t)=>t.totalHits-e.totalHits);let n=i.slice(0,100);if(0===n.length){a.innerHTML='<tr class="table-placeholder"><td colspan="'.concat(s.length+2,'">No traffic found from the selected referrers in this period.</td></tr>');return}n.forEach(e=>{let t=a.insertRow(),r='<td title="'.concat(e.url,'">').concat(e.url.length>50?"".concat(e.url.substring(0,50),"..."):e.url,"</td>");s.forEach(t=>{r+="<td>".concat((e.referrerCounts[t]||0).toLocaleString(),"</td>")}),t.innerHTML=r+="<td><strong>".concat(e.totalHits.toLocaleString(),"</strong></td>")});let l=a.insertRow(),o="<td><strong>Total</strong></td>";s.forEach(e=>{let t=n.reduce((t,a)=>t+(a.referrerCounts[e]||0),0);o+="<td><strong>".concat(t.toLocaleString(),"</strong></td>")});let c=n.reduce((e,t)=>e+t.totalHits,0);l.innerHTML=o+="<td><strong>".concat(c.toLocaleString(),"</strong></td>")}formatBytes(e){if(0===e)return"0 B";let t=Math.floor(Math.log(e)/Math.log(1024));return"".concat(Number.parseFloat((e/Math.pow(1024,t)).toFixed(2))," ").concat(["B","KB","MB","GB","TB"][t])}showLoading(e){document.getElementById("loadingIndicator").classList.toggle("hidden",!e),document.getElementById("results").classList.toggle("hidden",e),e&&this.destroyExistingCharts()}setupDateRangeControls(e,t){let a=document.getElementById("startDate"),s=document.getElementById("endDate"),r=e.toISOString().split("T")[0],i=t.toISOString().split("T")[0];a.min=r,a.max=i,s.min=r,s.max=i,a.value=r,s.value=i,document.getElementById("totalLogEntries").textContent="".concat(this.fullFileAnalysis.totalEntries.toLocaleString()," total entries"),document.getElementById("dateRangeSpan").textContent="".concat(e.toLocaleDateString()," - ").concat(t.toLocaleDateString())}applyDateFilter(){if(!this.fullFileAnalysis)return;let e=new Date(document.getElementById("startDate").value+"T00:00:00.000Z"),t=new Date(document.getElementById("endDate").value+"T00:00:00.000Z");if(t<e)return void alert("End date cannot be earlier than start date.");this.currentAnalysis=this.aggregateStatsForRange(e,t),this.displayResults(this.currentAnalysis),this.showFilteredInfo(this.currentAnalysis)}applyQuickFilter(e){if(!this.fullFileAnalysis)return;let t=new Date(this.fullFileAnalysis.maxDate),a=new Date(t);a.setUTCDate(a.getUTCDate()-(e-1)),document.getElementById("startDate").value=a.toISOString().split("T")[0],document.getElementById("endDate").value=t.toISOString().split("T")[0],this.currentAnalysis=this.aggregateStatsForRange(a,t),this.displayResults(this.currentAnalysis),this.showFilteredInfo(this.currentAnalysis)}resetDateFilter(){this.fullFileAnalysis&&(this.currentAnalysis=this.fullFileAnalysis,this.setupDateRangeControls(this.fullFileAnalysis.minDate,this.fullFileAnalysis.maxDate),this.displayResults(this.currentAnalysis),document.getElementById("filteredInfo").classList.add("hidden"))}showFilteredInfo(e){let t=document.getElementById("filteredInfo");document.getElementById("filteredEntries").textContent="".concat(e.totalEntries.toLocaleString()," entries"),document.getElementById("filteredDateRange").textContent="".concat(e.minDate.toLocaleDateString()," - ").concat(e.maxDate.toLocaleDateString()),t.classList.remove("hidden")}setupFilterSearch(e,t){e.addEventListener("keyup",e=>{let a=e.target.value.toLowerCase();t.querySelectorAll("label").forEach(e=>{e.textContent.toLowerCase().includes(a)?e.style.display="flex":e.style.display="none"})})}destroy(){}constructor(){this.dailyStats={},this.currentAnalysis=null,this.fullFileAnalysis=null,this.charts={},this.comparisonCharts={},this.comparisonData=null,this.rejectionPatterns=[],this.selectedFiles=[],this.botPatterns=this.initializeBotPatterns(),this.initializeEventListeners()}}let l=()=>((0,r.useEffect)(()=>{let e=new n;return()=>{"function"==typeof e.destroy&&e.destroy()}},[]),(0,s.jsx)("main",{className:"analyzer-page",children:(0,s.jsx)("div",{className:"analyzer-app",children:(0,s.jsxs)("div",{className:"container",children:[(0,s.jsx)("header",{className:"header",children:(0,s.jsxs)("div",{className:"header-content",children:[(0,s.jsx)("div",{className:"logo-section",children:(0,s.jsx)("h1",{children:"Access Log Analyzer"})}),(0,s.jsx)("div",{className:"header-actions",children:(0,s.jsx)("button",{id:"clearData",className:"header-btn secondary",children:"Clear Data"})})]})}),(0,s.jsx)("div",{className:"upload-section",children:(0,s.jsxs)("div",{className:"upload-container",children:[(0,s.jsxs)("div",{className:"dropbox",id:"dropbox",children:[(0,s.jsxs)("div",{className:"dropbox-content",children:[(0,s.jsx)("div",{className:"upload-icon",children:"\uD83D\uDCC1"}),(0,s.jsx)("p",{className:"dropbox-text",children:"Drag & drop your log file(s) here"}),(0,s.jsx)("p",{className:"dropbox-subtext",children:"or click to browse (.log, .txt files)"}),(0,s.jsx)("input",{type:"file",id:"logFile",accept:".log,.txt",className:"file-input",multiple:!0})]}),(0,s.jsx)("div",{id:"fileListContainer",className:"hidden"})]}),(0,s.jsxs)("div",{id:"fileSizeWarning",className:"file-size-warning hidden",children:[(0,s.jsx)("strong",{children:"Large File(s) Detected:"})," Processing may take several minutes."]}),(0,s.jsx)("button",{id:"analyzeBtn",className:"analyze-btn",disabled:!0,children:"Analyze Log File(s)"})]})}),(0,s.jsxs)("div",{id:"loadingIndicator",className:"loading hidden",children:[(0,s.jsx)("div",{className:"spinner"}),(0,s.jsx)("p",{children:"Analyzing log file(s)..."}),(0,s.jsx)("div",{className:"loading-details",children:(0,s.jsx)("span",{id:"loadingStatus",children:"Processing..."})}),(0,s.jsx)("div",{className:"progress-container",children:(0,s.jsx)("div",{className:"progress-bar",id:"progressBar"})}),(0,s.jsxs)("div",{className:"performance-tip",children:[(0,s.jsx)("strong",{children:"Tip:"})," Large files may take several minutes. This runs in your browser."]})]}),(0,s.jsxs)("div",{id:"results",className:"results hidden",children:[(0,s.jsxs)("div",{id:"dateRangeSection",className:"date-range-section",children:[(0,s.jsxs)("div",{className:"date-range-header",children:[(0,s.jsx)("h3",{children:"\uD83D\uDCC5 Date Range Filter"}),(0,s.jsxs)("div",{className:"date-range-info",children:[(0,s.jsx)("span",{id:"totalLogEntries",children:"0 total entries"}),(0,s.jsx)("span",{id:"dateRangeSpan",children:"No data"})]})]}),(0,s.jsxs)("div",{className:"date-range-controls",children:[(0,s.jsxs)("div",{className:"date-input-group",children:[(0,s.jsx)("label",{htmlFor:"startDate",children:"From:"}),(0,s.jsx)("input",{type:"date",id:"startDate",className:"date-input"})]}),(0,s.jsxs)("div",{className:"date-input-group",children:[(0,s.jsx)("label",{htmlFor:"endDate",children:"To:"}),(0,s.jsx)("input",{type:"date",id:"endDate",className:"date-input"})]}),(0,s.jsxs)("div",{className:"date-range-buttons",children:[(0,s.jsx)("button",{id:"applyDateRange",className:"apply-btn",children:"Apply Filter"}),(0,s.jsx)("button",{id:"resetDateRange",className:"reset-btn",children:"Reset"}),(0,s.jsx)("button",{id:"showComparison",className:"comparison-btn",children:"\uD83D\uDCCA Compare Periods"})]}),(0,s.jsxs)("div",{className:"quick-filters",children:[(0,s.jsx)("button",{className:"quick-filter-btn","data-days":"1",children:"Today"}),(0,s.jsx)("button",{className:"quick-filter-btn","data-days":"7",children:"Last 7 Days"}),(0,s.jsx)("button",{className:"quick-filter-btn","data-days":"30",children:"Last 30 Days"}),(0,s.jsx)("button",{className:"quick-filter-btn","data-days":"90",children:"Last 90 Days"})]})]}),(0,s.jsxs)("div",{className:"filtered-info hidden",id:"filteredInfo",children:[(0,s.jsx)("span",{id:"filteredEntries",children:"0 entries"})," shown from",(0,s.jsx)("span",{id:"filteredDateRange",children:"date range"})]})]}),(0,s.jsxs)("div",{id:"comparisonSection",className:"comparison-section hidden",children:[(0,s.jsxs)("div",{className:"comparison-header",children:[(0,s.jsx)("h3",{children:"\uD83D\uDCC8 Period Comparison"}),(0,s.jsx)("button",{id:"hideComparison",className:"close-comparison-btn",children:"✕"})]}),(0,s.jsxs)("div",{className:"comparison-controls",children:[(0,s.jsxs)("div",{className:"comparison-periods",children:[(0,s.jsxs)("div",{className:"period-selector",children:[(0,s.jsx)("h4",{children:"Period A"}),(0,s.jsxs)("div",{className:"period-inputs",children:[(0,s.jsx)("input",{type:"date",id:"periodAStart",className:"date-input"}),(0,s.jsx)("span",{children:"to"}),(0,s.jsx)("input",{type:"date",id:"periodAEnd",className:"date-input"})]}),(0,s.jsxs)("div",{className:"period-presets",children:[(0,s.jsx)("button",{className:"preset-btn","data-period":"A","data-days":"7",children:"Last 7 days"}),(0,s.jsx)("button",{className:"preset-btn","data-period":"A","data-days":"30",children:"Last 30 days"})]})]}),(0,s.jsxs)("div",{className:"period-selector",children:[(0,s.jsx)("h4",{children:"Period B (Compare to)"}),(0,s.jsxs)("div",{className:"period-inputs",children:[(0,s.jsx)("input",{type:"date",id:"periodBStart",className:"date-input"}),(0,s.jsx)("span",{children:"to"}),(0,s.jsx)("input",{type:"date",id:"periodBEnd",className:"date-input"})]}),(0,s.jsxs)("div",{className:"period-presets",children:[(0,s.jsx)("button",{className:"preset-btn","data-period":"B","data-days":"7",children:"Previous 7 days"}),(0,s.jsx)("button",{className:"preset-btn","data-period":"B","data-days":"30",children:"Previous 30 days"})]})]})]}),(0,s.jsx)("button",{id:"runComparison",className:"run-comparison-btn",children:"Run Comparison"})]}),(0,s.jsxs)("div",{id:"comparisonResults",className:"comparison-results hidden",children:[(0,s.jsx)("div",{className:"comparison-summary",children:(0,s.jsxs)("div",{className:"period-info",children:[(0,s.jsxs)("div",{className:"period-card period-a",children:[(0,s.jsx)("h4",{children:"Period A"}),(0,s.jsx)("div",{className:"period-dates",id:"periodADates"}),(0,s.jsx)("div",{className:"period-duration",id:"periodADuration"})]}),(0,s.jsxs)("div",{className:"period-card period-b",children:[(0,s.jsx)("h4",{children:"Period B"}),(0,s.jsx)("div",{className:"period-dates",id:"periodBDates"}),(0,s.jsx)("div",{className:"period-duration",id:"periodBDuration"})]})]})}),(0,s.jsxs)("div",{className:"comparison-metrics",children:[(0,s.jsxs)("div",{className:"metric-card",children:[(0,s.jsx)("div",{className:"metric-label",children:"Total Requests"}),(0,s.jsxs)("div",{className:"metric-values",children:[(0,s.jsx)("span",{className:"metric-a",id:"compTotalRequestsA",children:"0"}),(0,s.jsx)("span",{className:"metric-b",id:"compTotalRequestsB",children:"0"})]}),(0,s.jsx)("div",{className:"metric-change",id:"compTotalRequestsChange",children:"0%"})]}),(0,s.jsxs)("div",{className:"metric-card",children:[(0,s.jsx)("div",{className:"metric-label",children:"Unique URLs"}),(0,s.jsxs)("div",{className:"metric-values",children:[(0,s.jsx)("span",{className:"metric-a",id:"compUniqueUrlsA",children:"0"}),(0,s.jsx)("span",{className:"metric-b",id:"compUniqueUrlsB",children:"0"})]}),(0,s.jsx)("div",{className:"metric-change",id:"compUniqueUrlsChange",children:"0%"})]}),(0,s.jsxs)("div",{className:"metric-card",children:[(0,s.jsx)("div",{className:"metric-label",children:"Bot Traffic"}),(0,s.jsxs)("div",{className:"metric-values",children:[(0,s.jsx)("span",{className:"metric-a",id:"compBotTrafficA",children:"0"}),(0,s.jsx)("span",{className:"metric-b",id:"compBotTrafficB",children:"0"})]}),(0,s.jsx)("div",{className:"metric-change",id:"compBotTrafficChange",children:"0%"})]}),(0,s.jsxs)("div",{className:"metric-card",children:[(0,s.jsx)("div",{className:"metric-label",children:"Human Traffic"}),(0,s.jsxs)("div",{className:"metric-values",children:[(0,s.jsx)("span",{className:"metric-a",id:"compHumanTrafficA",children:"0"}),(0,s.jsx)("span",{className:"metric-b",id:"compHumanTrafficB",children:"0"})]}),(0,s.jsx)("div",{className:"metric-change",id:"compHumanTrafficChange",children:"0%"})]}),(0,s.jsxs)("div",{className:"metric-card",children:[(0,s.jsx)("div",{className:"metric-label",children:"Total Bytes"}),(0,s.jsxs)("div",{className:"metric-values",children:[(0,s.jsx)("span",{className:"metric-a",id:"compTotalBytesA",children:"0"}),(0,s.jsx)("span",{className:"metric-b",id:"compTotalBytesB",children:"0"})]}),(0,s.jsx)("div",{className:"metric-change",id:"compTotalBytesChange",children:"0%"})]}),(0,s.jsxs)("div",{className:"metric-card",children:[(0,s.jsx)("div",{className:"metric-label",children:"Error Rate"}),(0,s.jsxs)("div",{className:"metric-values",children:[(0,s.jsx)("span",{className:"metric-a",id:"compErrorRateA",children:"0%"}),(0,s.jsx)("span",{className:"metric-b",id:"compErrorRateB",children:"0%"})]}),(0,s.jsx)("div",{className:"metric-change",id:"compErrorRateChange",children:"0%"})]})]}),(0,s.jsxs)("div",{className:"comparison-charts",children:[(0,s.jsxs)("div",{className:"chart-container",children:[(0,s.jsx)("div",{className:"chart-header",children:(0,s.jsx)("h3",{children:"Daily Traffic Comparison"})}),(0,s.jsx)("canvas",{id:"comparisonTrafficChart"})]}),(0,s.jsxs)("div",{className:"chart-container",children:[(0,s.jsx)("div",{className:"chart-header",children:(0,s.jsx)("h3",{children:"Bot vs Human Traffic Comparison"})}),(0,s.jsx)("canvas",{id:"comparisonBotChart"})]})]}),(0,s.jsxs)("div",{className:"comparison-tables",children:[(0,s.jsxs)("div",{className:"comparison-table-container",children:[(0,s.jsxs)("div",{className:"chart-header",children:[(0,s.jsx)("h3",{children:"\uD83E\uDD16 Bot Hits per URL - Comparison"}),(0,s.jsxs)("div",{className:"comparison-table-controls",children:[(0,s.jsxs)("div",{className:"multiselect-dropdown",id:"compBotFilterDropdown",children:[(0,s.jsx)("div",{className:"multiselect-display",id:"compBotFilterDisplay",children:"Select Bots"}),(0,s.jsxs)("div",{className:"multiselect-options",id:"compBotFilterOptions",children:[(0,s.jsxs)("div",{className:"multiselect-actions",children:[(0,s.jsx)("button",{className:"filter-action-btn","data-action":"select-all",children:"Select All"}),(0,s.jsx)("button",{className:"filter-action-btn","data-action":"deselect-all",children:"Deselect All"})]}),(0,s.jsx)("div",{className:"multiselect-search-container",children:(0,s.jsx)("input",{type:"text",id:"compBotFilterSearch",className:"multiselect-search-input",placeholder:"Search bots..."})}),(0,s.jsx)("div",{className:"multiselect-checkboxes",id:"compBotFilterCheckboxes"})]})]}),(0,s.jsx)("button",{className:"export-btn","data-table":"comparison-bot-hits",children:"Export CSV"})]})]}),(0,s.jsx)("div",{className:"table-wrapper",children:(0,s.jsxs)("table",{id:"comparisonBotHitsTable",children:[(0,s.jsx)("thead",{}),(0,s.jsx)("tbody",{})]})})]}),(0,s.jsxs)("div",{className:"comparison-table-container",children:[(0,s.jsxs)("div",{className:"chart-header",children:[(0,s.jsx)("h3",{children:"\uD83D\uDC65 Human Traffic Sources - Comparison"}),(0,s.jsxs)("div",{className:"comparison-table-controls",children:[(0,s.jsxs)("div",{className:"multiselect-dropdown",id:"compReferrerFilterDropdown",children:[(0,s.jsx)("div",{className:"multiselect-display",id:"compReferrerFilterDisplay",children:"Select Referrers"}),(0,s.jsxs)("div",{className:"multiselect-options",id:"compReferrerFilterOptions",children:[(0,s.jsxs)("div",{className:"multiselect-actions",children:[(0,s.jsx)("button",{className:"filter-action-btn","data-action":"select-all",children:"Select All"}),(0,s.jsx)("button",{className:"filter-action-btn","data-action":"deselect-all",children:"Deselect All"})]}),(0,s.jsx)("div",{className:"multiselect-search-container",children:(0,s.jsx)("input",{type:"text",id:"compReferrerFilterSearch",className:"multiselect-search-input",placeholder:"Search referrers..."})}),(0,s.jsx)("div",{className:"multiselect-checkboxes",id:"compReferrerFilterCheckboxes"})]})]}),(0,s.jsx)("button",{className:"export-btn","data-table":"comparison-traffic-sources",children:"Export CSV"})]})]}),(0,s.jsx)("div",{className:"table-wrapper",children:(0,s.jsxs)("table",{id:"comparisonTrafficSourcesTable",children:[(0,s.jsx)("thead",{}),(0,s.jsx)("tbody",{})]})})]})]})]})]}),(0,s.jsxs)("div",{className:"stats-grid",children:[(0,s.jsxs)("div",{className:"stat-card",children:[(0,s.jsx)("h3",{children:"Unique URLs"}),(0,s.jsx)("div",{className:"stat-value",id:"uniqueUrls",children:"0"})]}),(0,s.jsxs)("div",{className:"stat-card",children:[(0,s.jsx)("h3",{children:"Unique URLs / day"}),(0,s.jsx)("div",{className:"stat-value",id:"uniqueUrlsPerDay",children:"0"})]}),(0,s.jsxs)("div",{className:"stat-card",children:[(0,s.jsx)("h3",{children:"Total events"}),(0,s.jsx)("div",{className:"stat-value",id:"totalEvents",children:"0"})]}),(0,s.jsxs)("div",{className:"stat-card",children:[(0,s.jsx)("h3",{children:"Events / day"}),(0,s.jsx)("div",{className:"stat-value",id:"eventsPerDay",children:"0"})]}),(0,s.jsxs)("div",{className:"stat-card",children:[(0,s.jsx)("h3",{children:"Total bytes"}),(0,s.jsx)("div",{className:"stat-value",id:"totalBytes",children:"0"})]}),(0,s.jsxs)("div",{className:"stat-card",children:[(0,s.jsx)("h3",{children:"Average bytes"}),(0,s.jsx)("div",{className:"stat-value",id:"avgBytes",children:"0"})]}),(0,s.jsxs)("div",{className:"stat-card",children:[(0,s.jsx)("h3",{children:"Bytes per day"}),(0,s.jsx)("div",{className:"stat-value",id:"bytesPerDay",children:"0"})]}),(0,s.jsxs)("div",{className:"stat-card",children:[(0,s.jsx)("h3",{children:"Success (2xx)"}),(0,s.jsx)("div",{className:"stat-value",id:"successCount",children:"0"})]}),(0,s.jsxs)("div",{className:"stat-card",children:[(0,s.jsx)("h3",{children:"Redirection (3xx)"}),(0,s.jsx)("div",{className:"stat-value",id:"redirectionCount",children:"0"})]}),(0,s.jsxs)("div",{className:"stat-card",children:[(0,s.jsx)("h3",{children:"Client Error (4xx)"}),(0,s.jsx)("div",{className:"stat-value",id:"clientErrorCount",children:"0"})]}),(0,s.jsxs)("div",{className:"stat-card",children:[(0,s.jsx)("h3",{children:"Server Error (5xx)"}),(0,s.jsx)("div",{className:"stat-value",id:"serverErrorCount",children:"0"})]}),(0,s.jsxs)("div",{className:"stat-card",children:[(0,s.jsx)("h3",{children:"Errors"}),(0,s.jsx)("div",{className:"stat-value",id:"errorCount",children:"0"})]})]}),(0,s.jsxs)("div",{className:"bot-analysis-section",children:[(0,s.jsx)("h2",{children:"\uD83E\uDD16 Bot & Crawler Analysis"}),(0,s.jsxs)("div",{className:"stats-grid",children:[(0,s.jsxs)("div",{className:"stat-card",children:[(0,s.jsx)("h3",{children:"Total Bot Requests"}),(0,s.jsx)("div",{className:"stat-value",id:"totalBotRequests",children:"0"})]}),(0,s.jsxs)("div",{className:"stat-card",children:[(0,s.jsx)("h3",{children:"Bot Traffic %"}),(0,s.jsx)("div",{className:"stat-value",id:"botTrafficPercentage",children:"0%"})]}),(0,s.jsxs)("div",{className:"stat-card",children:[(0,s.jsx)("h3",{children:"Unique Bots"}),(0,s.jsx)("div",{className:"stat-value",id:"uniqueBots",children:"0"})]}),(0,s.jsxs)("div",{className:"stat-card",children:[(0,s.jsx)("h3",{children:"Human Traffic %"}),(0,s.jsx)("div",{className:"stat-value",id:"humanTrafficPercentage",children:"0%"})]})]}),(0,s.jsxs)("div",{className:"bot-categories",children:[(0,s.jsxs)("div",{className:"bot-category",children:[(0,s.jsxs)("div",{className:"bot-category-header",children:[(0,s.jsx)("h3",{className:"bot-category-title",children:"\uD83D\uDD0D SEO & Search Engine Bots"}),(0,s.jsx)("span",{className:"bot-category-count",id:"seoBotsCount",children:"0 requests"})]}),(0,s.jsx)("div",{className:"bot-list",id:"seoBotsList"})]}),(0,s.jsxs)("div",{className:"bot-category",children:[(0,s.jsxs)("div",{className:"bot-category-header",children:[(0,s.jsx)("h3",{className:"bot-category-title",children:"\uD83E\uDDE0 AI & Machine Learning Bots"}),(0,s.jsx)("span",{className:"bot-category-count",id:"aiBotsCount",children:"0 requests"})]}),(0,s.jsx)("div",{className:"bot-list",id:"aiBotsList"})]}),(0,s.jsxs)("div",{className:"bot-category",children:[(0,s.jsxs)("div",{className:"bot-category-header",children:[(0,s.jsx)("h3",{className:"bot-category-title",children:"\uD83D\uDCF1 Social Media Bots"}),(0,s.jsx)("span",{className:"bot-category-count",id:"socialBotsCount",children:"0 requests"})]}),(0,s.jsx)("div",{className:"bot-list",id:"socialBotsList"})]}),(0,s.jsxs)("div",{className:"bot-category",children:[(0,s.jsxs)("div",{className:"bot-category-header",children:[(0,s.jsx)("h3",{className:"bot-category-title",children:"\uD83D\uDCCA Monitoring & Analytics Bots"}),(0,s.jsx)("span",{className:"bot-category-count",id:"monitoringBotsCount",children:"0 requests"})]}),(0,s.jsx)("div",{className:"bot-list",id:"monitoringBotsList"})]}),(0,s.jsxs)("div",{className:"bot-category",children:[(0,s.jsxs)("div",{className:"bot-category-header",children:[(0,s.jsx)("h3",{className:"bot-category-title",children:"\uD83D\uDD12 Security & Vulnerability Scanners"}),(0,s.jsx)("span",{className:"bot-category-count",id:"securityBotsCount",children:"0 requests"})]}),(0,s.jsx)("div",{className:"bot-list",id:"securityBotsList"})]}),(0,s.jsxs)("div",{className:"bot-category",children:[(0,s.jsxs)("div",{className:"bot-category-header",children:[(0,s.jsx)("h3",{className:"bot-category-title",children:"\uD83D\uDD27 Other Bots & Tools"}),(0,s.jsx)("span",{className:"bot-category-count",id:"otherBotsCount",children:"0 requests"})]}),(0,s.jsx)("div",{className:"bot-list",id:"otherBotsList"})]})]})]}),(0,s.jsxs)("div",{className:"charts-section",children:[(0,s.jsxs)("div",{className:"chart-container",children:[(0,s.jsxs)("div",{className:"chart-header",children:[(0,s.jsx)("h3",{children:"Response Codes Over Time"}),(0,s.jsx)("button",{className:"export-btn","data-chart":"responseCodes",children:"Export"})]}),(0,s.jsx)("canvas",{id:"responseCodesChart"})]}),(0,s.jsxs)("div",{className:"chart-container",children:[(0,s.jsxs)("div",{className:"chart-header",children:[(0,s.jsx)("h3",{children:"Daily Events"}),(0,s.jsx)("button",{className:"export-btn","data-chart":"events",children:"Export"})]}),(0,s.jsx)("canvas",{id:"eventsChart"})]}),(0,s.jsxs)("div",{className:"chart-container",children:[(0,s.jsxs)("div",{className:"chart-header",children:[(0,s.jsx)("h3",{children:"Top URLs"}),(0,s.jsx)("button",{className:"export-btn","data-chart":"urls",children:"Export"})]}),(0,s.jsx)("canvas",{id:"urlsChart"})]}),(0,s.jsxs)("div",{className:"chart-container",children:[(0,s.jsxs)("div",{className:"chart-header",children:[(0,s.jsx)("h3",{children:"Bot Activity Over Time"}),(0,s.jsx)("button",{className:"export-btn","data-chart":"botActivity",children:"Export"})]}),(0,s.jsx)("canvas",{id:"botActivityChart"})]}),(0,s.jsxs)("div",{className:"chart-container",children:[(0,s.jsxs)("div",{className:"chart-header",children:[(0,s.jsx)("h3",{children:"Top Bots Distribution"}),(0,s.jsx)("button",{className:"export-btn","data-chart":"botDistribution",children:"Export"})]}),(0,s.jsx)("canvas",{id:"botDistributionChart"})]}),(0,s.jsxs)("div",{className:"table-container",children:[(0,s.jsxs)("div",{className:"chart-header",children:[(0,s.jsx)("h3",{children:"Bot Details"}),(0,s.jsx)("button",{className:"export-btn","data-table":"bots",children:"Export CSV"})]}),(0,s.jsx)("div",{className:"table-wrapper",children:(0,s.jsxs)("table",{id:"botDetailsTable",children:[(0,s.jsx)("thead",{children:(0,s.jsxs)("tr",{children:[(0,s.jsx)("th",{children:"Bot Name"}),(0,s.jsx)("th",{children:"Type"}),(0,s.jsx)("th",{children:"Requests"}),(0,s.jsx)("th",{children:"Percentage"}),(0,s.jsx)("th",{children:"Last Seen"})]})}),(0,s.jsx)("tbody",{})]})})]}),(0,s.jsxs)("div",{className:"table-container",children:[(0,s.jsxs)("div",{className:"chart-header",children:[(0,s.jsx)("h3",{children:"Top URLs"}),(0,s.jsx)("button",{className:"export-btn","data-table":"urls",children:"Export CSV"})]}),(0,s.jsx)("div",{className:"table-wrapper",children:(0,s.jsxs)("table",{id:"topUrlsTable",children:[(0,s.jsx)("thead",{children:(0,s.jsxs)("tr",{children:[(0,s.jsx)("th",{children:"URL"}),(0,s.jsx)("th",{children:"Hits"}),(0,s.jsx)("th",{children:"Percentage"})]})}),(0,s.jsx)("tbody",{})]})})]}),(0,s.jsxs)("div",{className:"table-container",children:[(0,s.jsxs)("div",{className:"chart-header",children:[(0,s.jsx)("h3",{children:"Top IP Addresses"}),(0,s.jsx)("button",{className:"export-btn","data-table":"ips",children:"Export CSV"})]}),(0,s.jsx)("div",{className:"table-wrapper",children:(0,s.jsxs)("table",{id:"topIpsTable",children:[(0,s.jsx)("thead",{children:(0,s.jsxs)("tr",{children:[(0,s.jsx)("th",{children:"IP Address"}),(0,s.jsx)("th",{children:"Hits"}),(0,s.jsx)("th",{children:"Percentage"})]})}),(0,s.jsx)("tbody",{})]})})]}),(0,s.jsxs)("div",{className:"interactive-table-card full-width",children:[(0,s.jsxs)("div",{className:"chart-header",children:[(0,s.jsx)("h3",{children:"Bot Hits per URL"}),(0,s.jsx)("button",{className:"export-btn","data-table":"bot-url-hits",children:"Export CSV"})]}),(0,s.jsx)("div",{className:"bot-filter-controls",children:(0,s.jsxs)("div",{className:"multiselect-dropdown",id:"botUrlFilterDropdown",children:[(0,s.jsx)("div",{className:"multiselect-display",id:"botUrlFilterDisplay",children:"Select Bots"}),(0,s.jsxs)("div",{className:"multiselect-options",id:"botUrlFilterOptions",children:[(0,s.jsxs)("div",{className:"multiselect-actions",children:[(0,s.jsx)("button",{className:"filter-action-btn","data-action":"select-all",children:"Select All"}),(0,s.jsx)("button",{className:"filter-action-btn","data-action":"deselect-all",children:"Deselect All"})]}),(0,s.jsx)("div",{className:"multiselect-search-container",children:(0,s.jsx)("input",{type:"text",id:"botFilterSearch",className:"multiselect-search-input",placeholder:"Search bots..."})}),(0,s.jsx)("div",{className:"multiselect-checkboxes",id:"botUrlFilterCheckboxes"})]})]})}),(0,s.jsx)("div",{className:"table-wrapper",children:(0,s.jsxs)("table",{id:"botUrlHitsTable",children:[(0,s.jsx)("thead",{}),(0,s.jsx)("tbody",{})]})})]}),(0,s.jsxs)("div",{className:"interactive-table-card full-width",children:[(0,s.jsxs)("div",{className:"chart-header",children:[(0,s.jsx)("h3",{children:"Human Traffic Sources"}),(0,s.jsx)("button",{className:"export-btn","data-table":"traffic-sources",children:"Export CSV"})]}),(0,s.jsx)("div",{className:"bot-filter-controls",children:(0,s.jsxs)("div",{className:"multiselect-dropdown",id:"referrerFilterDropdown",children:[(0,s.jsx)("div",{className:"multiselect-display",id:"referrerFilterDisplay",children:"Select Referrers"}),(0,s.jsxs)("div",{className:"multiselect-options",id:"referrerFilterOptions",children:[(0,s.jsxs)("div",{className:"multiselect-actions",children:[(0,s.jsx)("button",{className:"filter-action-btn","data-action":"select-all",children:"Select All"}),(0,s.jsx)("button",{className:"filter-action-btn","data-action":"deselect-all",children:"Deselect All"})]}),(0,s.jsx)("div",{className:"multiselect-search-container",children:(0,s.jsx)("input",{type:"text",id:"referrerFilterSearch",className:"multiselect-search-input",placeholder:"Search referrers..."})}),(0,s.jsx)("div",{className:"multiselect-checkboxes",id:"referrerFilterCheckboxes"})]})]})}),(0,s.jsx)("div",{className:"table-wrapper",children:(0,s.jsxs)("table",{id:"trafficSourceTable",children:[(0,s.jsx)("thead",{}),(0,s.jsx)("tbody",{})]})})]})]})]}),(0,s.jsx)("div",{id:"rejectionModal",className:"modal-overlay hidden",children:(0,s.jsxs)("div",{className:"modal-content",children:[(0,s.jsxs)("div",{className:"modal-header",children:[(0,s.jsx)("h3",{children:"Exclude URL Prefixes"}),(0,s.jsx)("button",{id:"closeRejectionModal",className:"modal-close-btn",children:"\xd7"})]}),(0,s.jsxs)("div",{className:"modal-body",children:[(0,s.jsxs)("p",{children:["Enter any URL prefixes you wish to exclude from the analysis. For example, entering",(0,s.jsx)("code",{children:"/wp-json/"})," will ignore all requests to that path."]}),(0,s.jsxs)("div",{id:"rejectionRulesContainer",children:[(0,s.jsxs)("div",{className:"rejection-rule-row",children:[(0,s.jsx)("input",{type:"text",placeholder:"/path/to/exclude/",defaultValue:"/wp-"}),(0,s.jsx)("button",{className:"remove-rule-btn",children:"−"})]}),(0,s.jsxs)("div",{className:"rejection-rule-row",children:[(0,s.jsx)("input",{type:"text",placeholder:"/path/to/exclude/",defaultValue:"/robots.txt"}),(0,s.jsx)("button",{className:"remove-rule-btn",children:"−"})]}),(0,s.jsxs)("div",{className:"rejection-rule-row",children:[(0,s.jsx)("input",{type:"text",placeholder:"/path/to/exclude/",defaultValue:"/sitemaps.xml"}),(0,s.jsx)("button",{className:"remove-rule-btn",children:"−"})]})]}),(0,s.jsx)("button",{id:"addRejectionRule",className:"add-rule-btn",children:"+ Add Rule"})]}),(0,s.jsxs)("div",{className:"modal-footer",children:[(0,s.jsx)("button",{id:"analyzeWithoutRejection",className:"modal-btn secondary",children:"Analyze Without Filtering"}),(0,s.jsx)("button",{id:"confirmRejectionAndAnalyze",className:"modal-btn primary",children:"Apply Filters & Analyze"})]})]})})]})})}))}},e=>{e.O(0,[26,647,568,441,255,358],()=>e(e.s=7818)),_N_E=e.O()}]);